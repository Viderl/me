<!DOCTYPE html>
<html lang="zh_tw">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="description" content="About Vider Lien">
<meta name="author" content="Vider Lien">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
<link href="./open-iconic/font/css/open-iconic-bootstrap.css" rel="stylesheet">
<link href="css.css" rel="stylesheet">
</head>
<body>
<nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
  <a class="navbar-brand" href="#">Vider Lien</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
	<span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarsExampleDefault">
	<ul class="navbar-nav mr-auto">
	  <!--li class="nav-item active">
		<a class="nav-link" href="#">JQuery Slider <span class="sr-only">(current)</span></a>
	  </li-->
	  <li class="nav-item dropdown">
		<a class="nav-link dropdown-toggle" href="#" id="dropdownJS" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">jsvascript</a>
		<div class="dropdown-menu" aria-labelledby="dropdownJS">
		  <a class="dropdown-item" href="jquery_slider.html">jQuery Slider</a>
		</div>
	  </li>
	  <li class="nav-item dropdown">
		<a class="nav-link dropdown-toggle" href="#" id="dropdownJS" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">CSS</a>
		<div class="dropdown-menu" aria-labelledby="dropdownJS">
		  <a class="dropdown-item" href="#">progress bar</a>
		</div>
	  </li>
	</ul>
  </div>
</nav>

<div class="container">
  <h1>jQuery Slider</h1>
  <div class="slider_cotiner">
      <ul class="imgList">
		<li><img src="https://p48fxq.dm2302.livefilestore.com/y4mVf0l66b0nN6mtd5Nf2btiwz28-ugoDhCTyvPxel8KZa8INaqVMb_PmjhbHqE63MZBeGmBlmI7urkovxYzxuQaByDxvizMW3X8i5UD57nhZ4yYLbx3yL0dK-DJVxxA21EI-i_yK1lPRR1p_RCf6FJvGe3kfm3eUCdVFP5lCwTt61PdC6ANSNJd5tzBF6kDL7k3kDRGYgZSHG29_eRM-25qQ?width=1024&height=768&cropmode=none" alt="檸檬" title="檸檬" class="img-fluid"/></li>
		<li><img src="https://dxhbuq.dm2302.livefilestore.com/y4msDMXIwQA-gHkw1diIW5Hv_L-P1uSHYUbjUo_zVN-DdXaHEUWYWVCsPzVNqHBKt4_9qMb8iPk9gb_pM1jkj2H4O0sSvCCIrW5MZ9UZqByi1T9WFG5Lj9fJ09L49nS9HAATrI7ErQzoq7uOlMqBmrrDGJFZiLfE_uxns1SvbWrVhu7v_uk9fBDyfTXXlnmXG_XjgUnW_zEC067vcwxbIT2ww?width=1024&height=768&cropmode=none" alt="番茄" title="番茄" class="img-fluid"/></li>
		<li><img src="https://q2ftzg.dm2302.livefilestore.com/y4mccaNvaB7KwPYvDo1qjfXaDlNPUPZg1YQkntFTpsHEUKFq4UmOadLgpA6za4omYSO66Mo8YnUIkTymOQi2q3FrjIQsq0AQTHATqFP44lLDyPM366ErNaxDoSd3bT8mcwP3erPe7ZwkTul_gru7gArvEv979k0qjtZUN969X0o6-7j6pFzVjO6WOZP4TrdPZh9SelmYo7NrQbPoj-X8Eq6DQ?width=1024&height=768&cropmode=none" alt="楊桃" title="楊桃" class="img-fluid"/></li>
		<li><img src="https://2gn3fg.dm2302.livefilestore.com/y4mJBOUp9BSDgcpjKjMQ1eQXOs0EyurBHkl-wk5nVG9bsbSFxKIS1DTx8Mi8EvkEVuP408_0yC9TsUySl9dh1bY1eoMvvR2W-37Emp3_cKBif53ErE3U8J-eMPKNVYbYJYFZhpIkuTnspUycOJQhl6OSsEchqFXgfnAQ6CzgxQN_irAGElh34fHyEhtL27vzKk0ZzIZHvSL4QutadQCy9tp6g?width=1024&height=768&cropmode=none" alt="火龍果" title="火龍果" class="img-fluid"/></li>
		<li><img src="https://caa9xg.dm2302.livefilestore.com/y4m-g05RUhliwyarYqeAFrK1hilAxgUuNWGP_wGHZGLwNqw_uEzBaooxfatk2dC2_oVHemPi5kX2n6okPkD8qXqiWfSjJleBjZSxO5yGhrZ4wwG7UUplSKzE26tWjwKOh2d9vqX9SRGihdD4D9Miem5Z05oxkysJyvYtxuqTucGKZhXJKCZdRmiBY1u5YwwiBQIUtFilC8KNBM8T3lMVRRN3g?width=1024&height=768&cropmode=none" alt="茂谷柑" title="茂谷柑" class="img-fluid"/></li>
	  </ul>
      <div class="nagBtn">
        <button class="oi oi-chevron-left"></button>
        <button class="oi oi-chevron-right"></button>
      </div>
      <div>
      <div class="bean"></div>
      <div class="clearer"></div>
    </div>
  </div>
</div>

<script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
<script>
var slide={};
slide.slideCurrentIdx = 0;
slide.slideTimeItv = null;
slide.slideIsMoveing=0;
slide.slideRealAry=[];
	
	//首頁主要slide
slide.initSlide=function(){
    var elms = $(".slider_cotiner .imgList li");
	$(".slider_cotiner .imgList").css("width",((elms.length)*$(".slider_cotiner").width()).toString() + "px");
    $(".slider_cotiner .imgList li img").css("width",$(".slider_cotiner").width().toString() + "px");
	$(".slider_cotiner .imgList").css("left","0px");
    
    $(".slider_cotiner .bean").empty();
	for(var i=0;i<elms.length;i++){
		$(".bean").append("<a>#</a>");
		slide.slideRealAry.push(i);
	}
    $(".slider_cotiner .bean").find("a").eq(0).addClass("select");
	
	$(".slider_cotiner .bean a").click(function () {
		slide.slideIsMoveing=1;
		slide.slideClearAuto();
		slide.slideCurrentIdx = $(this).index();
		
		for(var i=0;i<slide.slideRealAry.length;i++){
			if(slide.slideRealAry[i]==slide.slideCurrentIdx){
				break;
			}
		}
		$(".slider_cotiner .bean").find("a").removeClass("select").eq(slide.slideCurrentIdx).addClass("select");
		
		var moveTo = i * $(".slider_cotiner").width() * -1;
		$(".slider_cotiner .imgList").stop(true, false).animate({
			left: moveTo
		}, 1000,function(){
			if($(".slider_cotiner .imgList").css("left")!="0px"){
				var range = parseInt($(".slider_cotiner .imgList").css("left").replace("px",""));
				while(range<0){
					$(".slider_cotiner .imgList li").last().after($(".slider_cotiner .imgList li").first());
					slide.slideRealAry.push(slide.slideRealAry.shift());
					range += $(".slider_cotiner").width();
					console.log(slide.slideRealAry);
				}
				$(".slider_cotiner .imgList").css("left","0px");
			}
			slide.slideIsMoveing=0;
			slide.slideStartAuto();
		});
		return false;
	});
	
	$(".oi-chevron-right").click(function () {
		if(!slide.slideIsMoveing){
        	slide.slideClearAuto();
			slide.sliding(1);
		}
	});

	$(".oi-chevron-left").click(function () {
		if(!slide.slideIsMoveing){
            slide.slideClearAuto();
			slide.sliding(0);
		}
	});
    
    $( window ).resize(function() {
        $(".slider_cotiner .imgList").css("width",((elms.length)*$(".slider_cotiner").width()).toString() + "px");
        $(".slider_cotiner .imgList li img").css("width",$(".slider_cotiner").width().toString() + "px");
    });
	
	slide.slideStartAuto();
}

slide.sliding=function(direction) {
	var elms = $(".slider_cotiner .imgList li");
	slide.slideIsMoveing=1;
	var moveTo = -1 * $(".slider_cotiner").width();
	if(direction){
		slide.slideRealAry.push(slide.slideRealAry.shift());
		slide.slideCurrentIdx++;
	}else if(!direction){
		slide.slideRealAry.unshift(slide.slideRealAry.pop());
		$(elms).first().before($(elms).last());
		$(".slider_cotiner .imgList").css("left",moveTo.toString() + "px");
		moveTo = 0;
		slide.slideCurrentIdx--;
	}
	
	if(slide.slideCurrentIdx<=-1){
		slide.slideCurrentIdx = elms.length-1;
	}else if(slide.slideCurrentIdx >= elms.length){
		slide.slideCurrentIdx = 0;
	}
	$(".slider_cotiner .bean").find("a").removeClass("select").eq(slide.slideCurrentIdx).addClass("select");
	$(".slider_cotiner .imgList").stop(true, false).animate({
		left: moveTo
	}, 1000,function(){
		var elms = $(".slider_cotiner .imgList li");
		if($(".slider_cotiner .imgList").css("left")!="0px"){
			$(elms).last().after($(elms).first());
			$(".slider_cotiner .imgList").css("left","0px");
		}
		slide.slideIsMoveing=0;
		slide.slideStartAuto();
	});
}

slide.slideAuto=function(){
	if($(".slider_cotiner .bean a:hover").length==0){
		slide.sliding(1);
	}
}

slide.slideStartAuto=function(){
	if(slide.slideTimeItv==null){
		slide.slideTimeItv = setInterval(slide.slideAuto,3000);
	}
}

slide.slideClearAuto=function(){
	if(slide.slideTimeItv!=null){
		clearInterval(slide.slideTimeItv);
		slide.slideTimeItv = null;
	}
}
jQuery(document).ready(function ($) {
	slide.initSlide();
});
	
</script>
</body>
</html>